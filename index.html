<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°—Ç–æ–ø –ø–∞–Ω–∏–∫–∞</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f0f0f0;
            font-family: Arial, sans-serif;
            text-align: center;
        }
        .circle, .hand, .color-box {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            display: none;
        }
        .circle {
            background-color: #3498db;
        }
        .hand {
            background-color: #f39c12;
        }
        .color-box {
            background-color: white;
        }
        .text {
            margin-top: 20px;
            font-size: 20px;
            font-weight: bold;
        }
        .button-container {
            margin-top: 30px;
        }
        .button {
            padding: 10px 20px;
            font-size: 16px;
            background-color: #e74c3c;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        @keyframes breathe {
            0% { transform: scale(1); }
            30% { transform: scale(1.5); }
            60% { transform: scale(1); }
        }
        @keyframes grip {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>
    <div class="text" id="instruction">–í—ã–±–µ—Ä–∏ –º–µ—Ç–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–∂–µ—Ç —Ç–µ–±–µ!</div>
    <div id="colorBox" class="color-box"></div>
    <div class="circle" id="circle"></div>
    <div class="hand" id="hand"></div>

    <div class="button-container">
        <button class="button" onclick="startBreathing()">üå¨ –î—ã—Ö–∞–Ω–∏–µ 4-7-8</button>
        <button class="button" onclick="grounding54321()">üëÅÔ∏è –ú–µ—Ç–æ–¥ 5-4-3-2-1</button>
        <button class="button" onclick="colorTherapy()">üé® –ù–∞–∑–æ–≤–∏ —Ü–≤–µ—Ç–∞</button>
        <button class="button" onclick="sensoryGrounding()">‚úã –°–µ–Ω—Å–æ—Ä–Ω–æ–µ –∑–∞–∑–µ–º–ª–µ–Ω–∏–µ</button>
        <button class="button" onclick="physicalSwitch()">üí™ –ù–∞–ø—Ä—è–≥–∏ –º—ã—à—Ü—ã</button>
    </div>
    <div class="button-container">
        <button class="button" onclick="repeatExercise()" style="display:none;">üîÑ –ü–æ–≤—Ç–æ—Ä–∏—Ç—å</button>
        <button class="button" onclick="closeApp()">‚ùå –ó–∞–∫—Ä—ã—Ç—å</button>
    </div>

    <script>
        function startBreathing() {
            reset();
            let text = document.getElementById("instruction");
            let circle = document.getElementById("circle");
            text.innerText = "–í–¥–æ—Ö –Ω–∞ 4 —Å–µ–∫—É–Ω–¥—ã...";
            circle.style.display = "block";
            circle.style.animation = "breathe 4s linear infinite";

            setTimeout(() => { text.innerText = "–ó–∞–¥–µ—Ä–∂–∏ –¥—ã—Ö–∞–Ω–∏–µ –Ω–∞ 7 —Å–µ–∫—É–Ω–¥..."; }, 4000);
            setTimeout(() => { text.innerText = "–í—ã–¥–æ—Ö –Ω–∞ 8 —Å–µ–∫—É–Ω–¥..."; }, 11000);
            setTimeout(() => { 
                text.innerText = "–¢—ã –º–æ–ª–æ–¥–µ—Ü! –°–µ–π—á–∞—Å —Ç–µ–±–µ —É–∂–µ —Å—Ç–∞–Ω–µ—Ç –ª—É—á—à–µ üòä"; 
                circle.style.display = "none"; 
                showRepeatButton();
            }, 19000);
        }

        function grounding54321() {
            reset();
            let text = document.getElementById("instruction");
            let steps = [
                "üëÄ –ù–∞–∑–æ–≤–∏ 5 –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –≤–æ–∫—Ä—É–≥ —Å–µ–±—è...",
                "üëÇ –ù–∞–∑–æ–≤–∏ 4 –∑–≤—É–∫–∞, –∫–æ—Ç–æ—Ä—ã–µ —Å–ª—ã—à–∏—à—å...",
                "ü§≤ –ù–∞–∑–æ–≤–∏ 3 –≤–µ—â–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–µ—à—å –ø–æ—Ç—Ä–æ–≥–∞—Ç—å...",
                "üëÉ –ù–∞–∑–æ–≤–∏ 2 –∑–∞–ø–∞—Ö–∞...",
                "üëÖ –ù–∞–∑–æ–≤–∏ 1 –≤–∫—É—Å –≤–æ —Ä—Ç—É..."
            ];
            let stepIndex = 0;

            function guide() {
                if (stepIndex < steps.length) {
                    text.innerText = steps[stepIndex];
                    stepIndex++;
                    setTimeout(guide, 5000);
                } else {
                    text.innerText = "–¢—ã –º–æ–ª–æ–¥–µ—Ü! –°–µ–π—á–∞—Å —Ç–µ–±–µ —É–∂–µ —Å—Ç–∞–Ω–µ—Ç –ª—É—á—à–µ üòä";
                    showRepeatButton();
                }
            }

            guide();
        }

        function colorTherapy() {
            reset();
            let text = document.getElementById("instruction");
            let colorBox = document.getElementById("colorBox");
            let colors = ["red", "blue", "green", "yellow", "purple"];
            let index = 0;

            colorBox.style.display = "block";
            text.innerText = "üé® –ù–∞–∑–æ–≤–∏ —Ü–≤–µ—Ç –ø—Ä–æ —Å–µ–±—è...";
            
            function changeColor() {
                if (index < colors.length) {
                    colorBox.style.backgroundColor = colors[index];
                    index++;
                    setTimeout(changeColor, 3000);
                } else {
                    text.innerText = "–¢—ã –º–æ–ª–æ–¥–µ—Ü! –°–µ–π—á–∞—Å —Ç–µ–±–µ —É–∂–µ —Å—Ç–∞–Ω–µ—Ç –ª—É—á—à–µ üòä";
                    colorBox.style.display = "none";
                    showRepeatButton();
                }
            }

            changeColor();
        }

        function sensoryGrounding() {
            reset();
            let text = document.getElementById("instruction");
            text.innerText = "‚úã –ü–æ—Ç—Ä–æ–≥–∞–π 3 –ø—Ä–µ–¥–º–µ—Ç–∞ –∏ –Ω–∞–∑–æ–≤–∏ –∏—Ö —Ç–µ–∫—Å—Ç—É—Ä—É...";
            setTimeout(() => {
                text.innerText = "–¢—ã –º–æ–ª–æ–¥–µ—Ü! –°–µ–π—á–∞—Å —Ç–µ–±–µ —É–∂–µ —Å—Ç–∞–Ω–µ—Ç –ª—É—á—à–µ üòä";
                showRepeatButton();
            }, 10000);
        }

        function physicalSwitch() {
            reset();
            let text = document.getElementById("instruction");
            let hand = document.getElementById("hand");
            text.innerText = "üí™ –°–∏–ª—å–Ω–æ –Ω–∞–ø—Ä—è–≥–∏ –≤—Å–µ –º—ã—à—Ü—ã –Ω–∞ 5 —Å–µ–∫—É–Ω–¥...";
            hand.style.display = "block";
            hand.style.animation = "grip 5s linear infinite";

            setTimeout(() => { text.innerText = "üßò –¢–µ–ø–µ—Ä—å —Ä–∞—Å—Å–ª–∞–±—å—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é..."; }, 5000);
            setTimeout(() => { text.innerText = "üî• –ü–æ–≤—Ç–æ—Ä–∏ –µ—â—ë 2 —Ä–∞–∑–∞"; }, 10000);
            setTimeout(() => { 
                text.innerText = "–¢—ã –º–æ–ª–æ–¥–µ—Ü! –°–µ–π—á–∞—Å —Ç–µ–±–µ —É–∂–µ —Å—Ç–∞–Ω–µ—Ç –ª—É—á—à–µ üòä"; 
                hand.style.display = "none"; 
                showRepeatButton();
            }, 15000);
        }

        function reset() {
            document.getElementById("instruction").innerText = "–í—ã–±–µ—Ä–∏ –º–µ—Ç–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–∂–µ—Ç —Ç–µ–±–µ!";
            document.getElementById("colorBox").style.display = "none";
            document.getElementById("circle").style.display = "none";
            document.getElementById("hand").style.display = "none";
            document.querySelector(".button-container button:nth-child(1)").style.display = "inline-block";
            document.querySelector(".button-container button:nth-child(2)").style.display = "none";
        }

        function showRepeatButton() {
            document.querySelector(".button-container button:nth-child(1)").style.display = "none";
            document.querySelector(".button-container button:nth-child(2)").style.display = "inline-block";
        }

        function closeApp() {
            if (window.Telegram.WebApp) {
                window.Telegram.WebApp.close();
            } else {
                alert("–ó–∞–∫—Ä–æ–π—Ç–µ –æ–∫–Ω–æ –≤—Ä—É—á–Ω—É—é.");
            }
        }
    </script>
</body>
</html>

